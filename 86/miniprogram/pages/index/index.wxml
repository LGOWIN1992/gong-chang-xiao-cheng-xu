<!--index.wxml-->
<wxs module="utils">
  var formatTime = function(date) {
    if (!date) return ''
    var d = getDate(date)
    var year = d.getFullYear()
    var month = d.getMonth() + 1
    var day = d.getDate()
    var hour = d.getHours()
    var minute = d.getMinutes()
    
    var formatNumber = function(n) {
      n = n.toString()
      return n[1] ? n : '0' + n
    }

    return year + '/' + formatNumber(month) + '/' + formatNumber(day) + ' ' + formatNumber(hour) + ':' + formatNumber(minute)
  }
  module.exports.formatTime = formatTime
</wxs>

<view class="container">
  <view class="header">
    <text class="title">仓库找货助手</text>
  </view>

  <view class="search-section">
    <input class="search-input" placeholder="请输入货物型号" bindinput="onSearchInput" value="{{searchQuery}}" />
    <button class="search-btn" bindtap="onSearch">查找位置</button>
  </view>

  <view class="result-section" wx:if="{{searchResult}}">
    <view class="result-card">
      <view class="result-item">
        <text class="label">型号：</text>
        <text class="value">{{searchResult.model}}</text>
      </view>
      <view class="result-item">
        <text class="label">位置：</text>
        <text class="value highlight">{{searchResult.location}}</text>
      </view>
      <view class="result-item">
        <text class="label">更新时间：</text>
        <text class="value">{{utils.formatTime(searchResult.update_time)}}</text>
      </view>
    </view>
  </view>
  
  <view class="result-section" wx:if="{{hasSearched && !searchResult}}">
    <text class="no-result">未找到该货物信息</text>
  </view>

  <view class="footer">
    <navigator url="/pages/login/login" class="admin-link">我是管理员</navigator>
  </view>
</view>
