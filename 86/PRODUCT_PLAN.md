# 仓库找货小程序 - 产品计划书

## 1. 项目概述
本项目旨在开发一款基于微信小程序的仓库货物查找工具，模仿菜鸟驿站的取件逻辑。主要解决仓库管理中“货物存放位置记录难、查找难”的问题。通过简单的录入和查询功能，实现货物型号与存放位置的数字化管理。

## 2. 核心需求
用户明确指出核心需求为：
- **记录**：将货物型号和货物存放位置记录在数据库。
- **存储**：数据保存在微信云端（微信云开发）。
- **查询**：通过货物型号快速找到存放位置。
- **权限**：需要区分管理员（录入/管理）和普通用户（仅查询）。
- **数据导入导出**：支持 Excel 文件的批量导入和导出。
- **稳定性测试**：上线前需进行大量数据的输入、查询和删除测试。

## 3. 用户角色
- **普通用户**：仅拥有查询权限，输入货物型号查找位置。
- **管理员**：拥有最高权限，包括录入货物、编辑/删除货物信息、管理后台数据、Excel 导入导出。

## 4. 功能模块

### 4.1 货物查询 (找货) - 全员可用
- **功能描述**：输入货物型号，获取该货物的存放位置。
- **输入项**：货物型号（支持模糊搜索或精确匹配）。
- **输出项**：
  - 存放位置详情。
  - 最后更新时间。
- **操作**：点击查询，展示结果列表。

### 4.2 货物录入 (入库/上架) - 管理员专用
- **功能描述**：管理员将货物放置在特定位置后，通过小程序记录关联关系。
- **权限校验**：进入页面前需校验管理员身份。
- **输入项**：
  - **货物型号** (必填)：支持手动输入或扫描条形码/二维码。
  - **存放位置** (必填)：支持手动输入（如：A区-1架-3层-05号）。
- **操作**：提交保存。

### 4.3 货物管理 (后台管理) - 管理员专用
- **列表展示**：分页展示所有已录入的货物数据。
- **操作功能**：
  - **编辑**：修改已录入的货物位置或型号。
  - **删除**：删除错误的或已出库的货物记录。
  - **导出数据**：将所有货物数据导出为 Excel 文件并下载。
  - **导入数据**：上传 Excel 文件，批量添加货物信息。

### 4.4 登录与权限
- **管理员登录**：
  - 提供一个隐蔽或显式的“管理员登录”入口。
  - 验证方式：输入预设的管理员密码（简单高效）或 校验 OpenID（安全性高）。
  - 状态保持：登录成功后本地缓存管理员状态。

## 5. 技术架构
- **前端**：微信小程序原生开发 (WXML, WXSS, JS/TS)。
- **后端/数据库**：微信云开发 (WeChat Cloud Development)。
  - **云数据库**：NoSQL 数据库。
  - **云函数**：
    - 基础逻辑：处理敏感逻辑（如管理员鉴权、数据修改）。
    - **Excel 处理**：使用 `node-xlsx` 库处理 Excel 文件的解析（导入）和生成（导出）。

## 6. 数据库设计 (草案)
**集合 1: `cargo_items` (货物信息)**

| 字段名 | 类型 | 描述 |
| :--- | :--- | :--- |
| `_id` | String | 唯一标识符 |
| `model` | String | 货物型号 (索引) |
| `location` | String | 存放位置 |
| `create_time` | Date | 录入时间 |
| `update_time` | Date | 更新时间 |

**集合 2: `app_config` (系统配置/管理员验证)**

| 字段名 | 类型 | 描述 |
| :--- | :--- | :--- |
| `key` | String | 配置键，如 `admin_password` |
| `value` | String | 配置值 |

## 7. 页面规划
1. **首页 (找货页)**
   - 核心功能：大搜索框、搜索结果展示。
   - 底部/角落：跳转“管理员登录”或“后台管理”的入口（如：‘我是管理员’按钮）。
2. **管理员登录页**
   - 简单的密码输入框。
   - 登录成功后跳转至管理页。
3. **管理后台页 (Dashboard)**
   - 功能入口：录入新货物、**导入 Excel**、**导出 Excel**。
   - 数据列表：所有货物列表，每行带“编辑”和“删除”按钮。
4. **录入/编辑页**
   - 表单页面，用于新增或修改货物信息。

## 8. 稳定性测试计划
为了确保小程序在高并发和大数据量下的稳定性，需在工程完成后执行以下测试：
1.  **批量输入测试**：
    -   利用 Excel 导入功能，一次性导入大量数据（如 1000-5000 条）。
    -   观察数据库写入速度和成功率。
2.  **查询稳定性测试**：
    -   随机抽取已导入的型号进行查询，验证响应速度和结果准确性。
    -   测试模糊搜索的性能（在大量数据下）。
3.  **批量删除/清理测试**：
    -   逐一或批量删除测试数据，验证数据库清理是否彻底。
    -   确保删除操作不影响其他正常数据。

## 9. 下一步计划
1. 初始化小程序项目代码结构。
2. 配置云开发环境 (创建集合)。
3. 开发首页（查询）和管理员登录页。
4. 开发管理后台（录入、列表、删除、导入导出）。
5. 执行稳定性测试脚本。
